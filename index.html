<meta charset=utf8>
<title>Demo of WebComponents built with Lego</title>
<link rel=stylesheet href=index.css>

<h1>Lego webcomponents demo</h1>

<article>
  <h2>Display</h2>
  <p>Minimalistic display</p>
  <hello-world name="World!"></hello-world>
</article>

<article>
  <h2>Button</h2>
  <p>Minimalistic button demo</p>
  <x-button></x-button>
</article>

<article>
  <h2>Counter</h2>
  <p>This is a basic classical counter demo</p>
  <x-counter></x-counter>
</article>

<footer>
  <a href="https://github.com/polight/lego">Source and documentation</a>
</footer>

<script type=module>
  import { h, Component } from './lib/index.js'

  class HelloWorld extends Component {
    init() {
      this.state = { name: 'Where?' }
    }
    get vdom() {
      return ({state}) => h("p", {}, `Hello ${state.name}`)
    }
  }
  customElements.define('hello-world', HelloWorld)


  class XButton extends Component {
    init () {
      this.state = { showText: false }
    }
    get vdom() {
      return ({ state }) => h(
        'button',
        { onclick: () => state.showText = !state.showText },
        state.showText ? 'text displayed! ðŸŽª' : 'text hidden ðŸ•µï¸â€â™€ï¸'
      )}
  }
  customElements.define('x-button', XButton)



  // This is the class you construct. Just extend `Component`
  class XCounter extends Component {

    // Here you can initialize anything before building
    init() {
      // `this.state` is very special. It contains all reactive properties
      // of the component.
      this.state = { counter: 0 }
    }

    // this property returns a function.
    // the function itself returns a virtualdom.
    // just build it as so: `h(nodeName, attributes, children)`
    // you should return a function and you may use the state
    get vdom() {
      return ({ state }) => ([
        h('button', { class: 'primary', onclick: () => state.counter-- }, '-'),
        h('span', {}, `${ state.counter * 10 }%`),
        h('button', { onclick: () => state.counter++ }, '+'),
        h('button', { onclick: () => state.counter = 0, class: 'reset' }, 'â™»'),
        h('progress', { value: state.counter * 10, max: 100 })
      ])
    }

    // same as the vdom property, but for css. Yes, you can have reactive CSS! ðŸ˜±
    get vstyle () {
      return ({ state }) => h('style', {}, `
        @import url('index.css');
      `)
    }
  }

  // Declare your class as an element. make sure to use an hyphen in the name!
  customElements.define('x-counter', XCounter)
</script>
